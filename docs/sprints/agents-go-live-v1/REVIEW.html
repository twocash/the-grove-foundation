<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agents Go Live v1 - Sprint Review</title>
  <style>
    :root {
      --bg-primary: #0a0f1a;
      --bg-secondary: #111827;
      --border-color: #1f2937;
      --text-primary: #f9fafb;
      --text-secondary: #9ca3af;
      --accent-green: #00ff9d;
      --accent-cyan: #00e5ff;
      --accent-amber: #ffb300;
      --status-pass: #22c55e;
      --status-fail: #ef4444;
      --status-warn: #f59e0b;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      padding: 2rem;
    }
    .container { max-width: 1200px; margin: 0 auto; }
    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      background: linear-gradient(90deg, var(--accent-cyan), var(--accent-green));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    h2 { font-size: 1.5rem; margin: 2rem 0 1rem; color: var(--accent-cyan); }
    h3 { font-size: 1.125rem; margin: 1.5rem 0 0.75rem; color: var(--text-primary); }
    .subtitle { color: var(--text-secondary); margin-bottom: 2rem; }
    .card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1rem;
    }
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 500;
    }
    .status-pass { background: rgba(34, 197, 94, 0.2); color: var(--status-pass); }
    .status-fail { background: rgba(239, 68, 68, 0.2); color: var(--status-fail); }
    .status-warn { background: rgba(245, 158, 11, 0.2); color: var(--status-warn); }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
    }
    th, td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid var(--border-color);
    }
    th { color: var(--text-secondary); font-weight: 500; }
    .check { color: var(--status-pass); }
    .screenshot-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }
    .screenshot-item {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      overflow: hidden;
    }
    .screenshot-item img {
      width: 100%;
      height: auto;
      border-bottom: 1px solid var(--border-color);
    }
    .screenshot-item .caption {
      padding: 0.75rem;
      font-size: 0.875rem;
    }
    .screenshot-item .caption strong {
      color: var(--accent-green);
    }
    .summary-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1rem;
      margin: 1rem 0;
    }
    .summary-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 1.25rem;
      text-align: center;
    }
    .summary-value {
      font-size: 2rem;
      font-weight: 600;
      color: var(--accent-green);
    }
    .summary-label {
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin-top: 0.25rem;
    }
    code {
      background: rgba(255, 255, 255, 0.1);
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.875rem;
    }
    pre {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 1rem;
      overflow-x: auto;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.875rem;
    }
    .evidence-callout {
      background: rgba(0, 229, 255, 0.1);
      border-left: 4px solid var(--accent-cyan);
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 0 8px 8px 0;
    }
    ul { margin: 0.5rem 0; padding-left: 1.5rem; }
    li { margin: 0.25rem 0; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Agents Go Live v1</h1>
    <p class="subtitle">Wire Claude LLM calls + UI Simplification - Sprint Review</p>

    <!-- Executive Summary -->
    <div class="card">
      <h2>Executive Summary</h2>
      <div class="summary-grid">
        <div class="summary-card">
          <div class="summary-value">5</div>
          <div class="summary-label">E2E Tests</div>
        </div>
        <div class="summary-card">
          <div class="summary-value">3</div>
          <div class="summary-label">Screenshots</div>
        </div>
        <div class="summary-card">
          <div class="summary-value">0</div>
          <div class="summary-label">Console Errors</div>
        </div>
        <div class="summary-card">
          <div class="summary-value" style="color: var(--status-pass);">PASS</div>
          <div class="summary-label">Overall Status</div>
        </div>
      </div>
    </div>

    <!-- Quality Gate Results -->
    <h2>Quality Gate Results</h2>
    <div class="card">
      <table>
        <thead>
          <tr>
            <th>Gate</th>
            <th>Requirement</th>
            <th>Result</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>E2E Tests</td>
            <td>All 5 tests pass</td>
            <td>5/5 passed</td>
            <td><span class="status-badge status-pass">PASS</span></td>
          </tr>
          <tr>
            <td>Screenshots</td>
            <td>Visual evidence captured</td>
            <td>3 screenshots verified</td>
            <td><span class="status-badge status-pass">PASS</span></td>
          </tr>
          <tr>
            <td>Console Audit</td>
            <td>Zero critical errors</td>
            <td>0 critical errors</td>
            <td><span class="status-badge status-pass">PASS</span></td>
          </tr>
          <tr>
            <td>Build Gate</td>
            <td>npm run build succeeds</td>
            <td>Build completed in ~1m 27s</td>
            <td><span class="status-badge status-pass">PASS</span></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Sprint Deliverables -->
    <h2>Sprint Deliverables</h2>
    <div class="card">
      <h3>Phase 1: Backend Wiring</h3>
      <ul>
        <li><strong>Claude Deep Research Endpoint:</strong> <code>POST /api/research/deep</code></li>
        <li><strong>Claude Write Endpoint:</strong> <code>POST /api/research/write</code></li>
        <li>Added <code>@anthropic-ai/sdk</code> dependency</li>
        <li>Model: <code>claude-sonnet-4-20250514</code></li>
      </ul>

      <h3>Phase 2: Service Wiring</h3>
      <ul>
        <li>Replaced <code>callGeminiWithGrounding()</code> stub with <code>callClaudeDeepResearch()</code></li>
        <li>Wired <code>callLLMForWriting()</code> to use Claude Write endpoint</li>
        <li>Voice config (formality, perspective, citationStyle) passed to LLM</li>
      </ul>

      <h3>Phase 3: UI Simplification</h3>
      <ul>
        <li><strong>ResearchAgentConfigEditor:</strong> 3 essential fields + Advanced toggle</li>
        <li><strong>WriterAgentConfigEditor:</strong> 3 essential fields + Advanced toggle</li>
        <li>v2 stub fields documented in schema files</li>
      </ul>
    </div>

    <!-- E2E Test Results -->
    <h2>E2E Test Results</h2>
    <div class="card">
      <h3>UI Simplification Verification (5 tests)</h3>
      <table>
        <thead>
          <tr><th>Test</th><th>Description</th><th>Status</th></tr>
        </thead>
        <tbody>
          <tr><td>01</td><td>Research Agent Config shows Essential Settings by default</td><td class="check">PASS</td></tr>
          <tr><td>02</td><td>Research Agent Config Advanced toggle works</td><td class="check">PASS</td></tr>
          <tr><td>03</td><td>Writer Agent Config shows Essential Settings by default</td><td class="check">PASS</td></tr>
          <tr><td>04</td><td>Writer Agent Config Advanced toggle works</td><td class="check">PASS</td></tr>
          <tr><td>05</td><td>Full interaction flow without console errors</td><td class="check">PASS</td></tr>
        </tbody>
      </table>
      <p style="margin-top: 1rem; color: var(--text-secondary);">
        <strong>Test command:</strong> <code>npx playwright test tests/e2e/agents-go-live.spec.ts</code>
      </p>
    </div>

    <!-- Visual Verification -->
    <h2>Visual Verification</h2>
    <div class="card">
      <div class="evidence-callout">
        <strong>Key Evidence:</strong> Screenshots demonstrate simplified UI with Essential Settings visible by default and Advanced toggle to reveal v2 stub fields.
      </div>
      <div class="screenshot-grid">
        <div class="screenshot-item">
          <img src="screenshots/3a-research-editor-simplified.png" alt="Research Agent Config - Simplified UI">
          <div class="caption">
            <strong>Phase 3a:</strong> ResearchAgentConfigEditor with Essential Settings (Research Depth, API Budget, Confidence Threshold)
          </div>
        </div>
        <div class="screenshot-item">
          <img src="screenshots/3b-writer-editor-simplified.png" alt="Writer Agent Config - Simplified UI">
          <div class="caption">
            <strong>Phase 3b:</strong> WriterAgentConfigEditor with Essential Settings (Writing Style, Require Citations, Quality Floor)
          </div>
        </div>
        <div class="screenshot-item">
          <img src="screenshots/e2e-05-interaction-complete.png" alt="E2E Interaction Complete">
          <div class="caption">
            <strong>E2E Test 05:</strong> Full interaction flow completed with zero console errors
          </div>
        </div>
      </div>
    </div>

    <!-- Field Classification -->
    <h2>v1.0 Field Classification</h2>
    <div class="card">
      <h3>ResearchAgentConfig</h3>
      <table>
        <thead>
          <tr><th>Field</th><th>Classification</th><th>Notes</th></tr>
        </thead>
        <tbody>
          <tr><td>searchDepth</td><td><span class="status-badge status-pass">ESSENTIAL</span></td><td>Research Depth (1-10 queries/branch)</td></tr>
          <tr><td>maxApiCalls</td><td><span class="status-badge status-pass">ESSENTIAL</span></td><td>API Budget protection</td></tr>
          <tr><td>confidenceThreshold</td><td><span class="status-badge status-pass">ESSENTIAL</span></td><td>Quality floor for evidence</td></tr>
          <tr><td>sourcePreferences</td><td><span class="status-badge status-warn">v2 STUB</span></td><td>Hidden behind Advanced toggle</td></tr>
          <tr><td>branchDelay</td><td><span class="status-badge status-warn">v2 STUB</span></td><td>Hidden behind Advanced toggle</td></tr>
        </tbody>
      </table>

      <h3>WriterAgentConfig</h3>
      <table>
        <thead>
          <tr><th>Field</th><th>Classification</th><th>Notes</th></tr>
        </thead>
        <tbody>
          <tr><td>voice.formality</td><td><span class="status-badge status-pass">ESSENTIAL</span></td><td>Writing style selector</td></tr>
          <tr><td>qualityRules.requireCitations</td><td><span class="status-badge status-pass">ESSENTIAL</span></td><td>Citation enforcement toggle</td></tr>
          <tr><td>qualityRules.minConfidenceToInclude</td><td><span class="status-badge status-pass">ESSENTIAL</span></td><td>Quality floor slider</td></tr>
          <tr><td>voice.perspective</td><td><span class="status-badge status-warn">v2 STUB</span></td><td>Hidden behind Advanced toggle</td></tr>
          <tr><td>voice.personality</td><td><span class="status-badge status-warn">v2 STUB</span></td><td>Hidden behind Advanced toggle</td></tr>
          <tr><td>documentStructure.*</td><td><span class="status-badge status-warn">v2 STUB</span></td><td>Hidden behind Advanced toggle</td></tr>
          <tr><td>qualityRules.flagUncertainty</td><td><span class="status-badge status-warn">v2 STUB</span></td><td>Hidden behind Advanced toggle</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Files Changed -->
    <h2>Files Changed</h2>
    <div class="card">
      <table>
        <thead>
          <tr><th>File</th><th>Change Type</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td><code>package.json</code></td><td>Modified</td><td>Added @anthropic-ai/sdk dependency</td></tr>
          <tr><td><code>server.js</code></td><td>Modified</td><td>Added /api/research/deep and /api/research/write endpoints</td></tr>
          <tr><td><code>src/explore/services/research-execution-engine.ts</code></td><td>Modified</td><td>Wired callClaudeDeepResearch()</td></tr>
          <tr><td><code>src/explore/services/writer-agent.ts</code></td><td>Modified</td><td>Wired callLLMForWriting()</td></tr>
          <tr><td><code>src/bedrock/.../ResearchAgentConfigEditor.tsx</code></td><td>Modified</td><td>Added showAdvanced state, UI simplification</td></tr>
          <tr><td><code>src/bedrock/.../WriterAgentConfigEditor.tsx</code></td><td>Modified</td><td>Added showAdvanced state, UI simplification</td></tr>
          <tr><td><code>src/core/schema/research-agent-config.ts</code></td><td>Modified</td><td>Added v1.0 field classification header</td></tr>
          <tr><td><code>src/core/schema/writer-agent-config.ts</code></td><td>Modified</td><td>Added v1.0 field classification header</td></tr>
          <tr><td><code>tests/e2e/agents-go-live.spec.ts</code></td><td>Created</td><td>E2E tests with console monitoring</td></tr>
        </tbody>
      </table>
    </div>

    <!-- DEX Compliance -->
    <h2>DEX Compliance</h2>
    <div class="card">
      <table>
        <thead>
          <tr><th>Principle</th><th>Compliance</th><th>Evidence</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>Declarative Sovereignty</td>
            <td><span class="status-badge status-pass">PASS</span></td>
            <td>Prompts constructed from config (voiceConfig drives style). UI complexity via showAdvanced state.</td>
          </tr>
          <tr>
            <td>Capability Agnosticism</td>
            <td><span class="status-badge status-pass">PASS</span></td>
            <td>Model name externalized to server config. No model-specific UI code.</td>
          </tr>
          <tr>
            <td>Provenance as Infrastructure</td>
            <td><span class="status-badge status-pass">PASS</span></td>
            <td>Sources tracked with accessedAt. Field classification documented in schema headers.</td>
          </tr>
          <tr>
            <td>Organic Scalability</td>
            <td><span class="status-badge status-pass">PASS</span></td>
            <td>Toggle pattern enables v2 expansion without restructuring. Endpoint pattern matches existing API.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Conclusion -->
    <div class="card" style="margin-top: 2rem;">
      <h2 style="margin-top: 0;">Sprint Complete</h2>
      <p style="color: var(--text-secondary);">
        The Agents Go Live v1 sprint successfully wired Claude LLM calls for both research and writing agents,
        and simplified the config editor UIs to show only essential fields by default. All E2E tests pass
        with zero critical console errors. The sprint is ready for merge.
      </p>
      <p style="margin-top: 1rem;">
        <strong>Protocol:</strong> Grove Execution Protocol v1.5<br>
        <strong>Date:</strong> 2026-01-20<br>
        <strong>Status:</strong> <span class="status-badge status-pass">COMPLETE</span>
      </p>
    </div>
  </div>
</body>
</html>
