{
  "version": "1.1",
  "display": {
    "dashboardTitle": "System Health",
    "categoryLabels": {
      "engine": "Engine Health",
      "schema-integrity": "Schema Integrity",
      "journey-navigation": "Journey Navigation",
      "rag-integration": "RAG Integration",
      "e2e-tests": "E2E Tests",
      "engagement": "Engagement System"
    }
  },
  "engineChecks": [
    {
      "id": "health-config-valid",
      "name": "Health Config Parseable",
      "category": "engine",
      "type": "json-exists",
      "target": { "file": "infrastructure/health-config.json" },
      "severity": "critical",
      "impact": "Health system cannot function without valid config",
      "inspect": "Validate JSON syntax in health-config.json"
    },
    {
      "id": "engagement-machine-valid",
      "name": "Engagement Machine Valid",
      "category": "engine",
      "type": "engagement-machine-check",
      "severity": "critical",
      "impact": "State machine not properly defined, cannot migrate engagement context",
      "inspect": "npx vitest run tests/unit/engagement-machine.test.ts"
    }
  ],
  "corpusChecks": [
    {
      "id": "hub-data-valid",
      "name": "Hub Data Parseable",
      "category": "schema-integrity",
      "type": "json-exists",
      "target": { "file": "knowledge/hubs.json" },
      "severity": "critical"
    },
    {
      "id": "journey-data-valid",
      "name": "Journey Data Parseable",
      "category": "schema-integrity",
      "type": "json-exists",
      "target": { "file": "exploration/journeys.json" },
      "severity": "critical"
    },
    {
      "id": "node-data-valid",
      "name": "Node Data Parseable",
      "category": "schema-integrity",
      "type": "json-exists",
      "target": { "file": "exploration/nodes.json" },
      "severity": "critical"
    },
    {
      "id": "journey-hub-refs",
      "name": "Journey Hub References",
      "category": "schema-integrity",
      "type": "reference-check",
      "source": { "file": "exploration/journeys.json", "path": "journeys.*.hubId" },
      "target": { "file": "knowledge/hubs.json", "path": "hubs" },
      "severity": "critical",
      "impact": "Broken hub references cause navigation failures",
      "inspect": "Compare journeys.json hubId values against hubs.json keys"
    },
    {
      "id": "node-journey-refs",
      "name": "Node Journey References",
      "category": "schema-integrity",
      "type": "reference-check",
      "source": { "file": "exploration/nodes.json", "path": "nodes.*.journeyId" },
      "target": { "file": "exploration/journeys.json", "path": "journeys" },
      "severity": "critical",
      "impact": "Orphaned nodes won't appear in any journey",
      "inspect": "Compare nodes.json journeyId values against journeys.json keys"
    },
    {
      "id": "journey-entry-refs",
      "name": "Journey Entry Node References",
      "category": "schema-integrity",
      "type": "reference-check",
      "source": { "file": "exploration/journeys.json", "path": "journeys.*.entryNode" },
      "target": { "file": "exploration/nodes.json", "path": "nodes" },
      "severity": "critical",
      "impact": "Journeys without valid entry nodes cannot start",
      "inspect": "Compare journeys.json entryNode values against nodes.json keys"
    },
    {
      "id": "node-next-refs",
      "name": "Node Primary Next References",
      "category": "journey-navigation",
      "type": "reference-check",
      "source": { "file": "exploration/nodes.json", "path": "nodes.*.primaryNext" },
      "target": { "file": "exploration/nodes.json", "path": "nodes" },
      "severity": "critical",
      "params": { "allowNull": true },
      "impact": "Broken next references strand users mid-journey",
      "inspect": "Check nodes.json primaryNext values exist in nodes keys (null is valid terminal)"
    },
    {
      "id": "node-alt-next-refs",
      "name": "Node Alternate Next References",
      "category": "journey-navigation",
      "type": "reference-check",
      "source": { "file": "exploration/nodes.json", "path": "nodes.*.alternateNext" },
      "target": { "file": "exploration/nodes.json", "path": "nodes" },
      "severity": "critical",
      "params": { "allowNull": true, "isArray": true },
      "impact": "Broken alternate paths frustrate exploration",
      "inspect": "Check nodes.json alternateNext values exist in nodes keys"
    },
    {
      "id": "journey-chains-complete",
      "name": "Journey Chains Reach Terminal",
      "category": "journey-navigation",
      "type": "chain-valid",
      "source": { "file": "exploration/journeys.json", "path": "journeys" },
      "params": {
        "entryField": "entryNode",
        "nodeFile": "exploration/nodes.json",
        "linkField": "primaryNext",
        "maxDepth": 50,
        "terminalValues": [null]
      },
      "severity": "warning",
      "impact": "Incomplete chains may leave users stranded or in loops",
      "inspect": "Trace from each journey's entryNode following primaryNext until null or maxDepth"
    }
  ],
  "engagementChecks": [
    {
      "id": "lens-picker-shown",
      "name": "Lens Picker Shows for New Users",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "engagement-behaviors.spec.ts:terminal shows lens picker for new users",
      "impact": "Users cannot select a viewing perspective",
      "inspect": "Run: npx playwright test -g 'lens picker'"
    },
    {
      "id": "url-lens-hydration",
      "name": "URL Lens Parameter Works",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "engagement-behaviors.spec.ts:engineer lens URL shows technical content",
      "impact": "Deep links to specific lenses fail",
      "inspect": "Run: npx playwright test -g 'engineer lens'"
    },
    {
      "id": "terminal-opens",
      "name": "Terminal Opens on Tree Click",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "engagement-behaviors.spec.ts:tree click opens terminal and shows content",
      "impact": "Users cannot access Terminal",
      "inspect": "Run: npx playwright test -g 'tree click'"
    },
    {
      "id": "lens-persistence-works",
      "name": "Lens Persistence Works",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "engagement-behaviors.spec.ts:lens selection persists across page reload",
      "impact": "User lens preferences not saved",
      "inspect": "npx playwright test -g 'lens selection persists'"
    },
    {
      "id": "journey-completion-persists",
      "name": "Journey Completion Persists",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "engagement-behaviors.spec.ts:journey completion persists across page reload",
      "impact": "Journey completion history lost on reload",
      "inspect": "npx playwright test -g 'journey completion'"
    },
    {
      "id": "entropy-threshold-triggers",
      "name": "Entropy Threshold Detection Works",
      "category": "engagement",
      "type": "unit-test",
      "test": "use-entropy-state.test.ts:isHighEntropy",
      "impact": "Journey offers not triggered when conversation becomes unfocused",
      "inspect": "npx vitest run tests/unit/use-entropy-state.test.ts"
    },
    {
      "id": "engagement-provider-works",
      "name": "Engagement Provider Works",
      "category": "engagement",
      "type": "unit-test",
      "test": "engagement-context.test.tsx:EngagementProvider",
      "impact": "Engagement context not available to components",
      "inspect": "npx vitest run tests/unit/engagement-context.test.tsx"
    },
    {
      "id": "active-grove-split-layout",
      "name": "Active Grove Split Layout",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "active-grove.spec.ts:clicking tree triggers split layout",
      "impact": "Terminal panel not visible when seedling clicked",
      "inspect": "npx playwright test -g 'clicking tree triggers split layout'"
    },
    {
      "id": "active-grove-lens-selection",
      "name": "Active Grove Lens Selection",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "active-grove.spec.ts:AG-1.6: selecting a lens updates engagement state",
      "impact": "Lens selection not persisted to XState machine",
      "inspect": "npx playwright test -g 'AG-1.6'"
    },
    {
      "id": "active-grove-content-transformation",
      "name": "Active Grove Content Transformation",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "active-grove.spec.ts:AG-1.7: content rail shows hero section with dynamic content",
      "impact": "Left column content does not change when lens selected",
      "inspect": "npx playwright test -g 'AG-1.7'"
    },
    {
      "id": "active-grove-persistence",
      "name": "Active Grove Lens Persistence",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "active-grove.spec.ts:AG-1.9: lens persists across page reload",
      "impact": "User lens preference lost on page reload",
      "inspect": "npx playwright test -g 'AG-1.9'"
    },
    {
      "id": "active-grove-url-hydration",
      "name": "Active Grove URL Hydration",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "active-grove.spec.ts:AG-2.3: URL lens parameter hydrates state",
      "impact": "Deep links to specific lenses fail",
      "inspect": "npx playwright test -g 'AG-2.3'"
    },
    {
      "id": "journey-pills-visible",
      "name": "Journey Pills Visible",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "journey-screenshots.spec.ts:journey pills are visible after lens selection",
      "impact": "Users cannot see or start journeys",
      "inspect": "npx playwright test -g 'journey pills are visible'"
    },
    {
      "id": "journey-xstate-transition",
      "name": "Journey XState Transition Works",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "journey-screenshots.spec.ts:journey click triggers XState transition",
      "impact": "Journey click causes crash or no response",
      "inspect": "npx playwright test -g 'journey click triggers XState'"
    },
    {
      "id": "simulation-journey-visual",
      "name": "Simulation Journey Visual",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "journey-screenshots.spec.ts:simulation journey start screenshot",
      "impact": "Visual regression in simulation journey flow",
      "inspect": "npx playwright test -g 'simulation journey'"
    },
    {
      "id": "journey-completion-tracking",
      "name": "Journey Completion Tracking",
      "category": "engagement",
      "type": "e2e-behavior",
      "test": "journey-screenshots.spec.ts:journey completion can be tracked",
      "impact": "Journey progress not tracked by XState",
      "inspect": "npx playwright test -g 'journey completion'"
    }
  ]
}
