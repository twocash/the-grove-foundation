/* Tailwind CSS v4 Entry Point */
@import "tailwindcss";

/* ============================================================
   THEME CONFIGURATION (Tailwind v4 CSS-based config)
   ============================================================ */
@theme {
  /* ============================================================
     WORKSPACE TOKENS (Grove Workspace - Light/Dark mode)
     Sprint 6: Chat styling requires these for message bubbles
     ============================================================ */
  --color-primary: #4d7c0f;                    /* Grove green */
  --color-background-light: #f8f7f5;           /* Warm paper/cream */
  --color-background-dark: #0f172a;            /* Deep slate */
  --color-surface-light: #ffffff;              /* Cards, panels (light) */
  --color-surface-dark: #1e293b;               /* Cards, panels (dark) */
  --color-border-light: #e7e5e4;               /* Subtle borders (light) */
  --color-border-dark: #334155;                /* Dark borders */

  /* ============================================================
     SURFACE TOKENS (The Village - Paper/Ink aesthetic)
     v0.12e: Minimalist Orchard palette (warm bone, forest charcoal)
     ============================================================ */
  --color-paper: #F9F8F4;
  --color-paper-dark: #F0EFE9;

  --color-ink: #1A2421;
  --color-ink-muted: #4A5A50;
  --color-ink-border: #E5E5E0;

  --color-grove-cream: #F9F8F4;
  --color-grove-dark: #1A2421;
  --color-grove-forest: #355E3B;
  --color-grove-accent: #355E3B;
  --color-grove-clay: #D95D39;
  --color-grove-light: #E5E5E0;

  --color-terminal-bg: #FFFFFF;
  --color-terminal-phosphor: #1A2421;
  --color-terminal-border: #E5E5E0;
  --color-terminal-highlight: #D95D39;

  /* ============================================================
     FOUNDATION TOKENS (The Control Plane - Holodeck aesthetic)
     ============================================================ */
  --color-obsidian: #0D0D0D;
  --color-obsidian-raised: #141414;
  --color-obsidian-elevated: #1A1A1A;
  --color-obsidian-surface: #242424;

  --color-holo-cyan: #00D4FF;
  --color-holo-magenta: #FF00D4;
  --color-holo-lime: #00FF88;
  --color-holo-amber: #FFB800;
  --color-holo-red: #FF4444;

  /* ============================================================
     FONTS
     ============================================================ */
  --font-serif: 'EB Garamond', 'Lora', serif;
  --font-display: 'Tenor Sans', 'Playfair Display', sans-serif;
  --font-sans: 'Inter', sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
}

/* ============================================================
   SMART TYPOGRAPHY (v0.12e)
   Surface-specific: Genesis uses serif, Kinetic uses sans
   Sprint: typography-scope-fix-v1
   ============================================================ */
body {
  font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Editorial line height for readability */
.prose, p, .font-serif {
  line-height: 1.6;
}

/* ============================================================
   KINETIC SURFACE TYPOGRAPHY (Sprint: kinetic-experience-v1)
   Scoped to /explore - Inter at 13px base
   ============================================================ */
.kinetic-surface {
  font-family: var(--font-sans);
  font-size: 13px;
}

.kinetic-surface h1,
.kinetic-surface h2,
.kinetic-surface h3,
.kinetic-surface h4,
.kinetic-surface h5,
.kinetic-surface h6 {
  font-family: var(--font-sans);
  letter-spacing: -0.02em;
}

.kinetic-surface p {
  font-family: var(--font-sans);
}

/* ============================================================
   SURFACE STYLES (The Village)
   Preserved from index.html CDN config
   ============================================================ */

/* Editorial Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: #E5E5E0;
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
  background: #D1D1CD;
}

/* Blinking cursor animation */
.cursor-blink {
  animation: blink 1s step-end infinite;
}
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

/* Subtle Grain Texture for Surface */
.bg-grain {
  position: relative;
}
.bg-grain::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 0;
}
.content-z {
  position: relative;
  z-index: 1;
}

/* ============================================================
   FOUNDATION STYLES (The Control Plane)
   Dark-mode holodeck aesthetic
   ============================================================ */

/* Grid overlay for Foundation viewport */
.f-grid-overlay {
  background-image:
    linear-gradient(rgba(0, 212, 255, 0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 212, 255, 0.05) 1px, transparent 1px);
  background-size: 40px 40px;
  background-position: -1px -1px;
}

/* Holographic glow effects */
.f-glow {
  box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
}
.f-glow-strong {
  box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
}

/* Foundation scrollbar (darker) */
.f-scrollbar::-webkit-scrollbar {
  width: 6px;
}
.f-scrollbar::-webkit-scrollbar-track {
  background: #0D0D0D;
}
.f-scrollbar::-webkit-scrollbar-thumb {
  background: #333;
  border-radius: 3px;
}
.f-scrollbar::-webkit-scrollbar-thumb:hover {
  background: #00D4FF;
}

/* Foundation panel borders */
.f-panel {
  border: 1px solid rgba(0, 212, 255, 0.2);
  background-color: #141414;
  transition: border-color 150ms ease-out, box-shadow 300ms ease-out;
}
.f-panel:hover {
  border-color: rgba(0, 212, 255, 0.4);
  box-shadow: 0 0 10px rgba(0, 212, 255, 0.1);
}

/* Foundation status indicator pulse */
.f-status-pulse {
  animation: pulse 2s ease-in-out infinite;
}

/* Value flash animation for state changes */
@keyframes value-flash {
  0% { background-color: rgba(0, 212, 255, 0.3); }
  100% { background-color: transparent; }
}
.f-value-changed {
  animation: value-flash 500ms ease-out;
}

/* ============================================================
   ACTIVE GROVE SPLIT LAYOUT (Sprint: active-grove-v1)
   ADR-001: Uses clip-path for smooth animation without text reflow
   ============================================================ */

/* Custom easing function for smooth animations */
.ease-out-expo {
  transition-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
}

/* Content Rail - Left side scrollable container (Fix #7) */
.content-rail {
  position: relative;
  width: 100%;
  height: 100vh;
  overflow-y: auto;
  overflow-x: hidden;
  transition: width 0.8s cubic-bezier(0.16, 1, 0.3, 1);
}

.content-rail.split {
  width: 50%;
}

/* Tablet: 60/40 split */
@media (min-width: 768px) and (max-width: 1024px) {
  .content-rail.split {
    width: 60%;
  }
}

/* Mobile: No split (sheet behavior) */
@media (max-width: 767px) {
  .content-rail.split {
    width: 100%;
  }
}

/* Terminal Panel - Right side */
.terminal-panel {
  position: fixed;
  right: 0;
  top: 0;
  height: 100vh;
  width: 50%;
  transform: translateX(100%);
  opacity: 0;
  transition: all 1s cubic-bezier(0.16, 1, 0.3, 1);
  z-index: 40;
  will-change: transform, opacity;
  background: var(--glass-void);
  border-radius: 0;
  overflow: hidden;
}

.terminal-panel.visible {
  transform: translateX(0) scale(1);
  opacity: 1;
}

/* Terminal fills panel when embedded (React handles the rest) */
.terminal-panel > * {
  width: 100%;
  height: 100%;
}

/* Tablet: 40% width */
@media (min-width: 768px) and (max-width: 1024px) {
  .terminal-panel {
    width: 40%;
  }
}

/* Mobile: Bottom sheet instead of split */
@media (max-width: 767px) {
  .terminal-panel {
    width: 100%;
    height: 80vh;
    top: auto;
    bottom: 0;
    transform: translateY(100%);
    border-left: none;
    border-top: 1px solid var(--color-ink-border);
    border-radius: 16px 16px 0 0;
  }
  .terminal-panel.visible {
    transform: translateY(0);
  }
  .terminal-panel.mobile-sheet {
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
  }
}

/* Content inner wrapper - fills available width (Fix #7) */
.content-rail-inner {
  width: 100%;
  min-height: 100%;
  padding-right: 1rem;
}

/* In split mode, add breathing room */
.content-rail.split .content-rail-inner {
  padding-right: 2rem;
}

/* Mobile - no extra padding needed */
@media (max-width: 767px) {
  .content-rail.split .content-rail-inner {
    padding-right: 1rem;
  }
}

/* Terminal panel content - prevent jumps on lens switch (Fix #7) */
/* Note: Do NOT set flex-direction here - it breaks TerminalHeader pills layout */
.terminal-panel .flex-1 {
  min-height: 0;
}

/* Terminal content fills available space */
.terminal-panel [class*="overflow-y-auto"] {
  flex: 1;
  min-height: 0;
}

/* Hero container - accounts for fixed header (Fix #8) */
:root {
  --header-height: 56px;
}

.hero-container {
  container-type: inline-size;
  height: calc(100vh - var(--header-height));
  display: flex;
  flex-direction: column;
  justify-content: space-between; /* Content top, tree bottom */
  overflow: hidden;
  padding-top: var(--header-height);
  box-sizing: border-box;
}

/* Split mode - scale typography to fit narrower rail */
.content-rail.split h1 {
  font-size: clamp(2rem, 5vw, 4rem);
}

.content-rail.split h2 {
  font-size: clamp(1.25rem, 3vw, 2rem);
}

.content-rail.split p {
  font-size: clamp(0.875rem, 2vw, 1.125rem);
}

/* Diary entry scaling for split mode (Active Grove Polish v2) */
.content-rail.split .diary-entry,
.content-rail.split blockquote {
  font-size: clamp(0.875rem, 1.5vw, 1rem);
  line-height: 1.6;
  max-width: 100%;
}

.content-rail.split .diary-author {
  font-size: clamp(0.75rem, 1.2vw, 0.875rem);
}

/* Fluid typography with container queries */
@container (max-width: 800px) {
  .hero-headline {
    font-size: clamp(2rem, 8cqw, 4rem);
  }
}

/* ============================================================
   ACTIVE TREE STATES (Sprint: active-grove-v1 - Epic 2)
   ============================================================ */

.active-tree-pulsing {
  position: relative;
}

.active-tree-pulsing::before {
  content: '';
  position: absolute;
  inset: -8px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(53, 94, 59, 0.2) 0%, transparent 70%);
  animation: tree-pulse 2s ease-in-out infinite;
}

.active-tree-stabilized {
  position: relative;
  filter: drop-shadow(0 0 8px rgba(53, 94, 59, 0.4));
}

.active-tree-directional {
  position: relative;
}

.active-tree-shake {
  animation: tree-shake 0.5s ease-in-out;
}

@keyframes tree-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.5;
  }
  50% {
    transform: scale(1.3);
    opacity: 0.8;
  }
}

@keyframes tree-shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

/* Scrollbar hide utility for carousel */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Line clamp utilities */
.line-clamp-4 {
  display: -webkit-box;
  -webkit-line-clamp: 4;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ============================================================
   TERMINAL ANIMATIONS (v0.12)
   ============================================================ */

/* Terminal slide animations */
.terminal-slide-up {
  animation: terminal-slide-up 300ms cubic-bezier(0.32, 0.72, 0, 1);
}

.terminal-slide-down {
  animation: terminal-slide-down 250ms cubic-bezier(0.32, 0.72, 0, 1);
}

@keyframes terminal-slide-up {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes terminal-slide-down {
  from {
    transform: translateY(0);
    opacity: 1;
  }
  to {
    transform: translateY(100%);
    opacity: 0;
  }
}

/* Organic float animation for scroll indicator */
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}
.animate-float {
  animation: float 3s ease-in-out infinite;
}

/* ============================================================
   UTILITY CLASSES
   ============================================================ */

/* Focus styles */
.focus-ring:focus {
  outline: 2px solid #00D4FF;
  outline-offset: 2px;
}
.focus-ring:focus:not(:focus-visible) {
  outline: none;
}

/* ============================================================
   GROVE WORKSPACE STYLES
   Light/dark mode workspace for /terminal route
   Sprint 3: Clean paper aesthetic (light) / Deep slate (dark)
   ============================================================ */

/* Material Symbols configuration */
.material-symbols-outlined {
  font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
  font-size: 20px;
}
.material-symbols-outlined.filled {
  font-variation-settings: 'FILL' 1;
}

/* ============================================
   CARD COMPONENT TOKENS
   Sprint: card-system-unification-v1

   Usage:
   - --card-border-* for border colors
   - --card-bg-* for backgrounds
   - --card-ring-* for focus/selection rings
   ============================================ */

:root {
  /* Card borders */
  --card-border-default: #e2e8f0;
  --card-border-inspected: #22d3ee;  /* cyan-400 */
  --card-border-active: rgba(16, 185, 129, 0.5);  /* emerald with alpha */

  /* Card backgrounds */
  --card-bg-default: transparent;
  --card-bg-active: rgba(16, 185, 129, 0.05);

  /* Card rings (focus/selection indicators) */
  --card-ring-color: #22d3ee;  /* cyan-400 */
  --card-ring-active: rgba(16, 185, 129, 0.3);

  /* Violet variant (custom lenses) */
  --card-ring-violet: #a78bfa;
  --card-border-violet: #a78bfa;
  --card-bg-violet-active: rgba(139, 92, 246, 0.05);
}

.dark {
  --card-border-default: #334155;  /* slate-700 */
  --card-bg-active: rgba(16, 185, 129, 0.1);
  --card-bg-violet-active: rgba(139, 92, 246, 0.1);
}

/* JSON syntax highlighting (for ObjectInspector) */
.json-key { color: #06b6d4; }      /* cyan-500 */
.json-string { color: #10b981; }   /* emerald-500 */
.json-number { color: #f59e0b; }   /* amber-500 */
.json-boolean { color: #8b5cf6; }  /* violet-500 */
.json-null { color: #64748b; }     /* slate-500 */

/* ============================================
   QUANTUM GLASS DESIGN SYSTEM
   Sprint: quantum-glass-v1
   ============================================ */

:root {
  /* Quantum Glass Backgrounds */
  --glass-void: #030712;
  --glass-panel: rgba(17, 24, 39, 0.6);
  --glass-solid: #111827;
  --glass-elevated: rgba(30, 41, 59, 0.4);

  /* Quantum Glass Borders */
  --glass-border: #1e293b;
  --glass-border-hover: #334155;
  --glass-border-active: rgba(16, 185, 129, 0.5);
  --glass-border-selected: rgba(6, 182, 212, 0.5);

  /* Neon Accent Colors */
  --neon-green: #10b981;
  --neon-cyan: #06b6d4;
  --neon-amber: #f59e0b;
  --neon-violet: #8b5cf6;

  /* Quantum Glass Text Scale */
  --glass-text-primary: #ffffff;
  --glass-text-secondary: #e2e8f0;
  --glass-text-body: #cbd5e1;
  --glass-text-muted: #94a3b8;
  --glass-text-subtle: #64748b;
  --glass-text-faint: #475569;

  /* Glow Effects */
  --glow-green: 0 0 20px -5px rgba(16, 185, 129, 0.4);
  --glow-cyan: 0 0 20px -5px rgba(6, 182, 212, 0.4);
  --glow-ambient: 0 8px 32px rgba(0, 0, 0, 0.4);

  /* Motion */
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --duration-slow: 500ms;
  --motion-ease-out: cubic-bezier(0.0, 0.0, 0.2, 1);
  --motion-ease-in: cubic-bezier(0.4, 0.0, 1, 1);
  --motion-ease-in-out: cubic-bezier(0.4, 0.0, 0.2, 1);

  /* Streaming animation tokens (kinetic-stream-polish-v1) */
  --streaming-cursor-color: var(--neon-green);
  --streaming-char-delay: 50ms;

  /* Floating input tokens (kinetic-stream-polish-v1) */
  --input-float-offset: 16px;
  --input-float-max-height: 200px;
}

/* Glass Panel - Blur container */
.glass-panel {
  background: var(--glass-solid);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
}

@supports (backdrop-filter: blur(12px)) {
  .glass-panel {
    background: var(--glass-panel);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
}

/* Glass Panel Solid - No blur */
.glass-panel-solid {
  background: var(--glass-solid);
  border: 1px solid var(--glass-border);
}

/* Glass intensity variants (kinetic-stream-polish-v1) */
.glass-panel-light {
  --glass-blur-local: 8px;
  --glass-bg-local: rgba(255, 255, 255, 0.03);
}

.glass-panel-medium {
  --glass-blur-local: 12px;
  --glass-bg-local: rgba(255, 255, 255, 0.05);
}

.glass-panel-heavy {
  --glass-blur-local: 20px;
  --glass-bg-local: rgba(255, 255, 255, 0.08);
}

@supports (backdrop-filter: blur(1px)) {
  .glass-panel-light,
  .glass-panel-medium,
  .glass-panel-heavy {
    background: var(--glass-bg-local, var(--glass-panel));
    backdrop-filter: blur(var(--glass-blur-local, 12px));
    -webkit-backdrop-filter: blur(var(--glass-blur-local, 12px));
  }
}

/* Streaming cursor (kinetic-stream-polish-v1) */
.streaming-cursor {
  color: var(--streaming-cursor-color);
  font-weight: bold;
}

/* Floating input container (kinetic-stream-polish-v1) */
.floating-input-container {
  position: sticky;
  bottom: 0;
  left: 0;
  right: 0;
  padding: var(--input-float-offset);
  pointer-events: none;
  z-index: 10;
}

.floating-input-panel {
  pointer-events: auto;
  max-height: var(--input-float-max-height);
}

/* New messages indicator (kinetic-stream-polish-v1) */
.new-messages-indicator {
  position: absolute;
  bottom: calc(var(--input-float-offset) + 80px);
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background: var(--glass-panel);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid var(--glass-border);
  border-radius: 9999px;
  cursor: pointer;
  font-size: 0.875rem;
  color: var(--glass-text-muted);
  z-index: 11;
  transition: all var(--duration-fast) var(--ease-out-expo);
}

.new-messages-indicator:hover {
  background: var(--glass-elevated);
  color: var(--glass-text-primary);
}

.new-messages-indicator .arrow {
  font-size: 1.1em;
}

/* Glass Card - Interactive */
.glass-card {
  position: relative;
  background: var(--glass-solid);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  transition: all var(--duration-normal) var(--ease-out-expo);
}

@supports (backdrop-filter: blur(8px)) {
  .glass-card {
    background: var(--glass-panel);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
}

.glass-card:hover {
  border-color: var(--glass-border-hover);
  transform: translateY(-2px);
  box-shadow: var(--glow-ambient);
}

.glass-card[data-selected="true"] {
  border-color: var(--glass-border-selected);
  box-shadow:
    0 0 0 1px var(--glass-border-selected),
    var(--glow-cyan);
}

.glass-card[data-active="true"] {
  border-color: var(--glass-border-active);
  background: linear-gradient(
    135deg,
    rgba(16, 185, 129, 0.1),
    var(--glass-panel)
  );
}

.glass-card[data-active="true"][data-selected="true"] {
  border-color: var(--neon-green);
  box-shadow:
    0 0 0 1px var(--neon-green),
    var(--glow-green);
}

/* Corner Accents */
.glass-card::before,
.glass-card::after {
  content: '';
  position: absolute;
  width: 12px;
  height: 12px;
  border: 1px solid var(--glass-border);
  transition: border-color var(--duration-normal);
  pointer-events: none;
}

.glass-card::before {
  top: -1px;
  left: -1px;
  border-right: none;
  border-bottom: none;
  border-radius: 12px 0 0 0;
}

.glass-card::after {
  bottom: -1px;
  right: -1px;
  border-left: none;
  border-top: none;
  border-radius: 0 0 12px 0;
}

.glass-card:hover::before,
.glass-card:hover::after {
  border-color: var(--neon-cyan);
}

.glass-card[data-active="true"]::before,
.glass-card[data-active="true"]::after {
  border-color: var(--neon-green);
}

/* Glass Viewport - Background with grid */
.glass-viewport {
  background: var(--glass-void);
  position: relative;
}

.glass-viewport::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(rgba(30, 41, 59, 0.3) 1px, transparent 1px),
    linear-gradient(90deg, rgba(30, 41, 59, 0.3) 1px, transparent 1px);
  background-size: 48px 48px;
  mask-image: radial-gradient(ellipse at center, black 0%, transparent 70%);
  pointer-events: none;
  opacity: 0.5;
}

/* Status Badge */
.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  font-family: var(--font-mono);
  font-size: 10px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  border-radius: 4px;
}

.status-badge-active {
  background: rgba(16, 185, 129, 0.15);
  color: var(--neon-green);
  border: 1px solid rgba(16, 185, 129, 0.3);
}

.status-badge-active::before {
  content: '';
  width: 6px;
  height: 6px;
  background: var(--neon-green);
  border-radius: 50%;
  animation: badge-pulse 2s ease-in-out infinite;
}

.status-badge-draft {
  background: rgba(100, 116, 139, 0.15);
  color: var(--glass-text-muted);
  border: 1px solid rgba(100, 116, 139, 0.3);
}

.status-badge-system {
  background: rgba(6, 182, 212, 0.15);
  color: var(--neon-cyan);
  border: 1px solid rgba(6, 182, 212, 0.3);
}

@keyframes badge-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* ============================================
   CARD UTILITIES - Quantum Glass v1.1
   ============================================ */

/* Card icon - monochrome, subtle */
.glass-card-icon {
  color: var(--glass-text-muted);
  font-size: 20px;
  transition: color var(--duration-fast);
}

.glass-card:hover .glass-card-icon {
  color: var(--glass-text-secondary);
}

/* Callout block - cyan left border */
.glass-callout {
  padding: 10px 14px;
  margin: 12px 0;
  border-left: 2px solid var(--neon-cyan);
  background: transparent;
  color: var(--glass-text-muted);
  font-style: italic;
  font-size: 13px;
  line-height: 1.5;
}

/* Card footer - metadata + action row */
.glass-card-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: 12px;
  margin-top: 12px;
  border-top: 1px solid var(--glass-border);
}

/* Card metadata */
.glass-card-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--glass-text-subtle);
}

.glass-card-meta .material-symbols-outlined {
  font-size: 14px;
}

/* Primary action button - green */
.glass-btn-primary {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 6px 14px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 6px;
  background: var(--neon-green);
  color: white;
  border: none;
  cursor: pointer;
  transition: all var(--duration-fast);
}

.glass-btn-primary:hover {
  background: rgba(16, 185, 129, 0.85);
  box-shadow: var(--glow-green);
}

/* ============================================
   GLASS SELECT BUTTON
   Sprint: lens-hover-fix-v1
   ============================================ */

.glass-select-button {
  font-size: 10px;
  font-weight: 500;
  padding: 6px 12px;
  border-radius: 4px;
  transition: all var(--duration-fast) var(--ease-out-expo);
  cursor: pointer;
}

.glass-select-button--ghost {
  background: transparent;
  border: 1px solid var(--glass-border-hover);
  color: var(--glass-text-muted);
}

.glass-select-button--ghost:hover {
  border-color: var(--neon-cyan);
  color: var(--neon-cyan);
}

.glass-select-button--solid {
  background: var(--neon-cyan);
  border: 1px solid var(--neon-cyan);
  color: var(--glass-void);
}

.glass-select-button--solid:hover {
  opacity: 0.9;
}

/* Secondary action button - subtle */
.glass-btn-secondary {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 6px 14px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 6px;
  background: var(--glass-elevated);
  color: var(--glass-text-secondary);
  border: 1px solid var(--glass-border);
  cursor: pointer;
  transition: all var(--duration-fast);
}

.glass-btn-secondary:hover {
  border-color: var(--neon-cyan);
  color: var(--glass-text-primary);
}

/* Animation utilities */
@keyframes fade-up {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-up {
  animation: fade-up var(--duration-normal) var(--ease-out-expo);
}

/* Glass text utilities */
.glass-text-primary { color: var(--glass-text-primary); }
.glass-text-secondary { color: var(--glass-text-secondary); }
.glass-text-body { color: var(--glass-text-body); }
.glass-text-muted { color: var(--glass-text-muted); }
.glass-text-subtle { color: var(--glass-text-subtle); }

/* Glass section header */
.glass-section-header {
  font-family: var(--font-mono);
  font-size: 10px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.15em;
  color: var(--glass-text-subtle);
}

/* Grove Workspace Container - Light Mode (default) */
.grove-workspace {
  --grove-bg: #f8f7f5;
  --grove-surface: #ffffff;
  --grove-border: #e7e5e4;
  --grove-accent: #4d7c0f;
  --grove-accent-muted: rgba(77, 124, 15, 0.1);
  --grove-text: #1e293b;
  --grove-text-muted: #64748b;
  --grove-text-dim: #94a3b8;
  --grove-success: #22c55e;
  --grove-warning: #f59e0b;
  --grove-error: #ef4444;

  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* Grove Workspace - Dark Mode */
.dark .grove-workspace,
.grove-workspace.dark {
  --grove-bg: #0f172a;
  --grove-surface: #1e293b;
  --grove-border: #334155;
  --grove-accent: #4d7c0f;
  --grove-accent-muted: rgba(77, 124, 15, 0.2);
  --grove-text: #f1f5f9;
  --grove-text-muted: #94a3b8;
  --grove-text-dim: #64748b;
}

/* Workspace scrollbar - Light mode */
.grove-workspace ::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
.grove-workspace ::-webkit-scrollbar-track {
  background: transparent;
}
.grove-workspace ::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}
.dark .grove-workspace ::-webkit-scrollbar-thumb {
  background: #334155;
}

/* Legacy Grove Widget Container (dark-only, deprecated) */
.grove-widget {
  --grove-bg: #0a0f14;
  --grove-surface: #121a22;
  --grove-border: #1e2a36;
  --grove-accent: #00d4aa;
  --grove-accent-muted: #0a4a3a;
  --grove-text: #e2e8f0;
  --grove-text-muted: #94a3b8;
  --grove-text-dim: #64748b;
  --grove-success: #22c55e;
  --grove-warning: #f59e0b;
  --grove-error: #ef4444;
  --stage-tender: #7dd3c0;
  --stage-rooting: #4ade80;
  --stage-branching: #22c55e;
  --stage-hardened: #16a34a;
  --stage-grafted: #15803d;
  --stage-established: #166534;

  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* Command Palette Animation */
.command-palette-overlay {
  animation: widget-fadeIn 150ms ease-out;
}

.command-palette {
  animation: widget-slideUp 200ms ease-out;
}

@keyframes widget-fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes widget-slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Widget Scrollbar Styling */
.widget-content::-webkit-scrollbar {
  width: 8px;
}

.widget-content::-webkit-scrollbar-track {
  background: var(--grove-bg);
}

.widget-content::-webkit-scrollbar-thumb {
  background: var(--grove-border);
  border-radius: 4px;
}

.widget-content::-webkit-scrollbar-thumb:hover {
  background: var(--grove-text-dim);
}

/* Widget Focus States */
.grove-widget input:focus,
.grove-widget button:focus-visible {
  outline: 2px solid var(--grove-accent);
  outline-offset: 2px;
}

/* Widget Code Styling */
.grove-widget code {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--grove-surface);
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-size: 0.875em;
}

/* ============================================================
   CHAT COLUMN TOKENS (Terminal Embedded Mode)
   Forest-dark palette for chat/conversation UI
   Sprint: Chat Column Unification v1
   ============================================================ */
:root {
  /* ============================================
     CHAT TOKENS - Now aliased to Glass tokens
     (Legacy compatibility layer - prefer --glass-* directly)
     ============================================ */

  /* Backgrounds - aliased to glass */
  --chat-bg: var(--glass-void);
  --chat-surface: var(--glass-solid);
  --chat-surface-hover: var(--glass-elevated);
  --chat-input-bg: var(--glass-solid);

  /* Borders - aliased to glass */
  --chat-border: var(--glass-border);
  --chat-border-strong: var(--glass-border-hover);
  --chat-border-accent: var(--neon-cyan);
  --chat-border-focus: var(--neon-cyan);

  /* Text - aliased to glass */
  --chat-text: var(--glass-text-primary);
  --chat-text-muted: var(--glass-text-muted);
  --chat-text-dim: var(--glass-text-subtle);
  --chat-text-accent: var(--neon-cyan);

  /* Accent - aliased to neon */
  --chat-accent: var(--neon-cyan);
  --chat-accent-hover: var(--neon-cyan);
  --chat-accent-muted: rgba(6, 182, 212, 0.15);
  --chat-accent-text: var(--glass-void);

  /* Glass effects - aliased to glass */
  --chat-glass: var(--glass-panel);
  --chat-glass-hover: var(--glass-elevated);
  --chat-glass-border: var(--glass-border);

  /* Semantic - keep as-is */
  --chat-success: var(--neon-green);
  --chat-warning: var(--neon-amber);
  --chat-error: #ef4444;
  --chat-error-bg: rgba(239, 68, 68, 0.15);
  --chat-error-border: rgba(239, 68, 68, 0.3);

  /* ============================================
     CHAT SPAN TOKENS (kinetic-stream-rendering-v1)
     Rhetorical span styling for AI responses
     ============================================ */

  /* Concept spans - clay/orange emphasis */
  --chat-concept-text: #D95D39;
  --chat-concept-bg: transparent;
  --chat-concept-bg-hover: rgba(217, 93, 57, 0.1);

  /* Action spans - primary green emphasis */
  --chat-action-text: #4d7c0f;
  --chat-action-bg: transparent;

  /* Entity spans - muted slate */
  --chat-entity-text: #64748b;

  /* ============================================
     FORK BUTTON TOKENS (kinetic-stream-reset-v2)
     Journey navigation fork buttons
     ============================================ */

  /* Primary (deep_dive) - Green */
  --fork-primary-bg: rgba(16, 185, 129, 0.1);
  --fork-primary-border: rgba(16, 185, 129, 0.3);
  --fork-primary-text: var(--neon-green);
  --fork-primary-bg-hover: rgba(16, 185, 129, 0.2);
  --fork-primary-border-hover: rgba(16, 185, 129, 0.5);

  /* Secondary (pivot) - Cyan */
  --fork-secondary-bg: rgba(6, 182, 212, 0.1);
  --fork-secondary-border: rgba(6, 182, 212, 0.3);
  --fork-secondary-text: var(--neon-cyan);
  --fork-secondary-bg-hover: rgba(6, 182, 212, 0.2);
  --fork-secondary-border-hover: rgba(6, 182, 212, 0.5);

  /* Tertiary (apply) - Amber */
  --fork-tertiary-bg: rgba(245, 158, 11, 0.1);
  --fork-tertiary-border: rgba(245, 158, 11, 0.3);
  --fork-tertiary-text: var(--neon-amber);
  --fork-tertiary-bg-hover: rgba(245, 158, 11, 0.2);
  --fork-tertiary-border-hover: rgba(245, 158, 11, 0.5);
}

/* ============================================
   FORK BUTTON STYLES (kinetic-stream-reset-v2)
   ============================================ */

.fork-button {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  border: 1px solid;
  background: transparent;
  font-family: var(--font-sans);
  transition: all var(--duration-fast) var(--ease-out-expo);
}

.fork-button:focus {
  outline: none;
}

.fork-button:focus-visible {
  box-shadow: 0 0 0 2px var(--glass-void), 0 0 0 4px currentColor;
}

.fork-button--primary {
  background: var(--fork-primary-bg);
  border-color: var(--fork-primary-border);
  color: var(--fork-primary-text);
}

.fork-button--primary:hover {
  background: var(--fork-primary-bg-hover);
  border-color: var(--fork-primary-border-hover);
  box-shadow: 0 0 12px -3px rgba(16, 185, 129, 0.4);
}

.fork-button--secondary {
  background: var(--fork-secondary-bg);
  border-color: var(--fork-secondary-border);
  color: var(--fork-secondary-text);
}

.fork-button--secondary:hover {
  background: var(--fork-secondary-bg-hover);
  border-color: var(--fork-secondary-border-hover);
  box-shadow: 0 0 12px -3px rgba(6, 182, 212, 0.4);
}

.fork-button--tertiary {
  background: var(--fork-tertiary-bg);
  border-color: var(--fork-tertiary-border);
  color: var(--fork-tertiary-text);
}

.fork-button--tertiary:hover {
  background: var(--fork-tertiary-bg-hover);
  border-color: var(--fork-tertiary-border-hover);
  box-shadow: 0 0 12px -3px rgba(245, 158, 11, 0.4);
}

/* Challenge (quaternary) - rose/pink for challenging questions */
.fork-button--quaternary {
  background: rgba(244, 63, 94, 0.1);
  border-color: rgba(244, 63, 94, 0.3);
  color: #fb7185;
}

.fork-button--quaternary:hover {
  background: rgba(244, 63, 94, 0.2);
  border-color: rgba(244, 63, 94, 0.5);
  box-shadow: 0 0 12px -3px rgba(244, 63, 94, 0.4);
}

/* Chat container for responsive queries */
.chat-container {
  container-type: inline-size;
  container-name: chat;
}

/* Responsive custom properties */
.chat-content {
  --chat-padding-x: 1rem;
  --chat-message-max-width: 90%;
}

@container chat (max-width: 359px) {
  .chat-content {
    --chat-padding-x: 0.75rem;
    --chat-message-max-width: 95%;
  }
  .chat-chips {
    flex-direction: column;
    gap: 0.5rem;
  }
}

@container chat (min-width: 360px) and (max-width: 479px) {
  .chat-content {
    --chat-padding-x: 0.875rem;
    --chat-message-max-width: 92%;
  }
}

@container chat (min-width: 480px) and (max-width: 639px) {
  .chat-content {
    --chat-padding-x: 1rem;
    --chat-message-max-width: 90%;
  }
}

@container chat (min-width: 640px) {
  .chat-content {
    --chat-padding-x: 1.5rem;
    --chat-message-max-width: 85%;
  }
}

/* ============================================
   CHAT INTERFACE - Quantum Glass v1.2
   ============================================ */

.glass-chat-container {
  background: var(--glass-void);
  min-height: 100%;
}

.glass-welcome-card {
  background: var(--glass-panel);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  padding: 24px;
}

@supports (backdrop-filter: blur(8px)) {
  .glass-welcome-card {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
}

.glass-welcome-title {
  color: var(--glass-text-primary);
  font-family: var(--font-mono);
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 8px;
}

.glass-welcome-body {
  color: var(--glass-text-body);
  font-size: 14px;
  line-height: 1.6;
}

.glass-suggestion-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 16px;
}

.glass-suggestion {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: var(--glass-solid);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  color: var(--glass-text-secondary);
  font-size: 14px;
  cursor: pointer;
  transition: all var(--duration-fast);
}

.glass-suggestion:hover {
  border-color: var(--glass-border-hover);
  background: var(--glass-elevated);
}

.glass-suggestion-icon {
  color: var(--glass-text-subtle);
  font-size: 16px;
}

/* Message Bubbles */
.glass-message {
  max-width: 80%;
  padding: 12px 16px;
  border-radius: 12px;
  font-size: 14px;
  line-height: 1.6;
}

.glass-message-user {
  margin-left: auto;
  background: var(--glass-elevated);
  border: 1px solid var(--glass-border);
  color: var(--glass-text-primary);
  border-radius: 12px 12px 4px 12px;
}

.glass-message-assistant {
  margin-right: auto;
  background: var(--glass-panel);
  border: 1px solid var(--glass-border);
  color: var(--glass-text-body);
  border-radius: 12px 12px 12px 4px;
}

@supports (backdrop-filter: blur(8px)) {
  .glass-message-assistant {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
}

.glass-message-error {
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.3);
  color: #fca5a5;
  border-radius: 12px 12px 12px 4px;
}

/* ============================================
   TERMINAL WELCOME (Sprint: terminal-quantum-welcome-v1)
   ============================================ */

.glass-welcome-card {
  background: var(--glass-panel);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  padding: 24px;
  max-width: 640px;
  margin: 0 auto;
}

@supports (backdrop-filter: blur(12px)) {
  .glass-welcome-card {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
}

.glass-welcome-prompt {
  display: block;
  width: 100%;
  text-align: left;
  background: var(--glass-elevated);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  padding: 12px 16px;
  color: var(--glass-text-primary);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.glass-welcome-prompt:hover {
  border-color: var(--neon-cyan);
  color: var(--neon-cyan);
}

/* Code blocks in messages */
.glass-message pre {
  background: var(--glass-solid);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  padding: 12px;
  overflow-x: auto;
  font-family: var(--font-mono);
  font-size: 13px;
}

.glass-message code {
  font-family: var(--font-mono);
  font-size: 13px;
}

/* Inline code */
.glass-message :not(pre) > code {
  background: var(--glass-elevated);
  padding: 2px 6px;
  border-radius: 4px;
}

/* Chat Input */
.glass-input-wrapper {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--glass-solid);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  transition: border-color var(--duration-fast);
}

.glass-input-wrapper:focus-within {
  border-color: var(--neon-cyan);
  box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.15);
}

.glass-input-field {
  flex: 1;
  background: var(--glass-void);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  padding: 12px 16px;
  color: var(--glass-text-primary);
  font-size: 14px;
  outline: none;
  transition: border-color var(--duration-fast);
}

.glass-input-field::placeholder {
  color: var(--glass-text-subtle);
}

.glass-input-field:focus {
  border-color: var(--neon-cyan);
  box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.15);
}

.glass-send-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: var(--neon-green);
  border: none;
  border-radius: 8px;
  color: white;
  cursor: pointer;
  transition: all var(--duration-fast);
}

.glass-send-btn:hover {
  background: rgba(16, 185, 129, 0.85);
  box-shadow: var(--glow-green);
}

.glass-send-btn:disabled {
  background: var(--glass-border);
  cursor: not-allowed;
  box-shadow: none;
}

/* ============================================================================
   Copilot Configurator Tokens
   Sprint: copilot-configurator-v1
   ============================================================================ */

:root {
  /* Panel */
  --copilot-bg: rgba(15, 23, 42, 0.95);
  --copilot-border: rgba(99, 102, 241, 0.3);
  --copilot-header-bg: linear-gradient(to right, rgba(67, 56, 202, 0.4), rgba(15, 23, 42, 1));

  /* Messages */
  --copilot-msg-assistant-bg: rgba(67, 56, 202, 0.2);
  --copilot-msg-assistant-border: rgba(99, 102, 241, 0.2);
  --copilot-msg-user-bg: rgba(51, 65, 85, 1);
  --copilot-msg-user-border: rgba(71, 85, 105, 1);

  /* Buttons */
  --copilot-btn-primary: rgb(79, 70, 229);
  --copilot-btn-primary-hover: rgb(99, 102, 241);
  --copilot-btn-secondary: rgba(51, 65, 85, 1);
  --copilot-btn-secondary-hover: rgba(71, 85, 105, 1);

  /* Diff */
  --copilot-diff-add: rgb(74, 222, 128);
  --copilot-diff-remove: rgb(248, 113, 113);
  --copilot-diff-bg: rgba(8, 12, 20, 1);

  /* Model indicator */
  --copilot-model-ready: rgb(34, 197, 94);
  --copilot-model-processing: rgb(251, 191, 36);
}

/* ============================================================================
   Kinetic Stream Tokens
   Sprint: kinetic-experience-v1
   ============================================================================ */

/* Fork Buttons */
.kinetic-fork {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: 9999px;
  font-family: var(--font-sans);
  font-size: 0.8125rem;
  font-weight: 500;
  transition: all 0.2s ease;
  cursor: pointer;
  border: none;
  outline: none;
}

.kinetic-fork:hover {
  transform: scale(1.05);
}

.kinetic-fork:active {
  transform: scale(0.95);
}

.kinetic-fork--primary {
  background: linear-gradient(135deg, var(--grove-clay, #d97706), var(--grove-terracotta, #c2410c));
  color: white;
  box-shadow: 0 0 12px rgba(217, 119, 6, 0.3);
}

.kinetic-fork--secondary {
  background: var(--glass-solid);
  border: 1px solid var(--glass-border);
  color: var(--glass-text-body);
}

.kinetic-fork--tertiary {
  background: transparent;
  border: 1px solid var(--glass-border);
  color: var(--glass-text-subtle);
}

.kinetic-fork--quaternary {
  background: transparent;
  color: var(--glass-text-subtle);
  font-style: italic;
}

/* Concept Spans (Active Rhetoric) */
.kinetic-concept {
  color: var(--grove-clay, #d97706);
  cursor: pointer;
  border-bottom: 1px solid transparent;
  transition: all 0.15s ease;
  font-family: var(--font-sans);
}

.kinetic-concept:hover {
  border-bottom-color: var(--grove-clay, #d97706);
  text-shadow: 0 0 8px rgba(217, 119, 6, 0.3);
}

/* Command Console */
.kinetic-console {
  position: fixed;
  bottom: 1.5rem;
  left: 50%;
  transform: translateX(-50%);
  width: min(90vw, 48rem);
  z-index: 50;
}

.kinetic-console-input {
  width: 100%;
  background: var(--glass-solid);
  border: 1px solid var(--glass-border);
  border-radius: 1.5rem;
  padding: 0.875rem 1.25rem;
  color: var(--glass-text-primary);
  font-family: var(--font-sans);
  font-size: 0.875rem;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.kinetic-console-input:focus {
  border-color: var(--neon-cyan);
  box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.15);
}

.kinetic-console-input::placeholder {
  color: var(--glass-text-subtle);
}

.kinetic-console-input:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
