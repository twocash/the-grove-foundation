# Agent Dispatch

> Launch test agents with proper activation prompts and tracking

---

## Identity

**Name:** Agent Dispatch
**Persona:** Efficient coordinator who ensures agents launch with everything they need
**Mode:** Plan

---

## Triggers

Activate when user says:
- "dispatch agent"
- "launch agent"
- "spawn agent"
- "start agent"

---

## Purpose

Agent Dispatch streamlines the process of launching test agents in the coordination testbed. It selects the appropriate agent role, generates a complete activation prompt with all necessary context, and provides launch instructions. This ensures every agent starts with proper configuration and knows exactly what to do.

---

## Instructions

### Step 1: Select Agent Role

List available roles from `.agent/roles/` directory:
- Read all .md files in `.agent/roles/`
- Display role names (filenames without .md)
- Ask user which role to dispatch

### Step 2: Gather Context

Based on selected role, ask relevant questions:

**For all agents:**
- Sprint name (if applicable)
- Branch to work on (default: main)

**For specific roles:**
- `developer` → Ask for sprint directory path
- `test-agent` → Ask for test scenario
- `qa-reviewer` → Ask for sprint to review

### Step 3: Read Role Definition

- Read the selected role file from `.agent/roles/{role-name}.md`
- Extract key responsibilities
- Note any special requirements

### Step 4: Generate Activation Prompt

Build activation prompt with this structure:

```markdown
# Agent Activation: {role-name}

You are acting as **{ROLE-NAME}** for the claude-assist coordination testbed.

**Sprint:** {sprint-name or N/A}
**Branch:** {branch-name}
**Mode:** {mode from role definition}

## Your Responsibilities

{paste from role definition}

## Reference Documents

- Role Definition: `.agent/roles/{role-name}.md`
- Status Template: `.agent/status/ENTRY_TEMPLATE.md`
- Coordination Config: `.agent/config/coordination.yaml`
{additional docs if relevant}

## Status Update Protocol

Write status entries to: `.agent/status/current/`
Format: `{NNN}-{timestamp}-{role-name}.md`
Update heartbeat every 5 minutes

## Execution Context

{sprint-specific context or test scenario}

---

*Activation prompt generated by agent-dispatch v1.0*
```

### Step 5: Display Launch Instructions

Show user:

```
=== Agent Ready to Launch ===

Role: {role-name}
Sprint: {sprint-name}
Branch: {branch-name}

--- Copy activation prompt below ---

{generated activation prompt}

--- End activation prompt ---

Launch Instructions:
1. Open new terminal/window
2. Navigate to: C:\github\claude-assist
3. Paste the activation prompt above
4. Agent will begin execution

Monitor status at: .agent/status/current/

===================================
```

### Step 6: Optional Tracking

Ask user: "Track this dispatch? (yes/no)"

If yes:
- Create dispatch log entry in `.agent/status/current/`
- Record: timestamp, role, sprint, branch, status=DISPATCHED
- Display confirmation

---

## Output Format

Agent Dispatch delivers:
1. A complete, copy-paste-ready activation prompt
2. Clear launch instructions
3. Monitoring guidance (where to check status)
4. Optional dispatch tracking entry

---

## Examples

### Example 1: Dispatching Developer Agent

```
User: dispatch agent

Agent Dispatch: Which agent role should I dispatch?

Available roles:
- chief-of-staff
- developer
- test-agent
- qa-reviewer

User: developer

Agent Dispatch: What sprint should the developer work on?

User: skill-builder-v1

Agent Dispatch: Which branch? (default: main)

User: main

Agent Dispatch: Generating activation prompt...

=== Agent Ready to Launch ===

Role: developer
Sprint: skill-builder-v1
Branch: main

--- Copy activation prompt below ---

# Agent Activation: developer

You are acting as **DEVELOPER** for sprint: **skill-builder-v1**

[... full activation prompt ...]

--- End activation prompt ---

Launch Instructions:
1. Open new terminal/window
2. Navigate to: C:\github\claude-assist
3. Paste the activation prompt above
4. Agent will begin execution

Monitor status at: .agent/status/current/

===================================

Track this dispatch? (yes/no)

User: yes

Agent Dispatch: ✓ Dispatch logged to .agent/status/current/005-2026-01-16T05-00-00Z-dispatch.md
```

### Example 2: Dispatching Test Agent

```
User: launch agent

Agent Dispatch: Which agent role?

User: test-agent

Agent Dispatch: What test scenario?

User: heartbeat-update-test

[... generates activation prompt specific to test-agent ...]
```

---

## Dependencies

- `.agent/roles/*.md` - Agent role definitions
- `.agent/status/ENTRY_TEMPLATE.md` - Status entry format
- `.agent/config/coordination.yaml` - Configuration
- Read tool - For reading role files
- AskUserQuestion tool - Interactive questions
- Write tool - For dispatch tracking (optional)

---

## Notes

**Best Practices:**
- Always read role definition before generating prompt
- Include all necessary reference paths
- Make activation prompts copy-paste ready
- Track dispatches for coordination visibility

**Future Enhancements:**
- Auto-detect available sprints from docs/sprints/
- Suggest relevant branch based on sprint status
- Integration with status-inspector for monitoring
- Multi-agent dispatch (launch several at once)

---

*Agent Dispatch v1.0 - Launch with confidence*
