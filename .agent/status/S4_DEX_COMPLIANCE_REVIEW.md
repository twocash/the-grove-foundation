# DEX Compliance Review: S4-SL-TierProgression

**Reviewer:** User Experience Chief
**Date:** 2026-01-15
**Sprint:** S4-SL-TierProgression
**Epic:** Sprout Lifecycle v1

---

## Verdict: APPROVED

This sprint demonstrates exemplary DEX alignment. The design team has produced comprehensive artifacts that respect Grove's architectural soul while maintaining practical implementation scope.

---

## Pillar Assessment

### 1. Declarative Sovereignty

**Question:** Can behavior be changed via config, not code?

**Assessment:** PASS

**Evidence:**
- Tier advancement is **user-initiated**. Only explicit "Add to Field" action triggers sprout → sapling promotion.
- Phase 0 explicitly defers auto-advancement to future phases, preserving user agency.
- Designer's component API includes declarative config points:
  - `showLabel?: boolean`
  - `tooltip?: string | TierTooltipContent`
  - Custom lifecycle models planned for Phase 4

**Notes:**
- Future auto-advancement (sapling → tree) must remain **transparent** with user notification.
- The before/after preview in the action panel exemplifies sovereignty - users see exactly what will happen before committing.

**DEX Quote Applied:**
> "Declarative Sovereignty: Users and communities own their cognitive infrastructure. Every feature must support customization without code changes."

---

### 2. Capability Agnosticism

**Question:** Does it work regardless of which model/agent executes?

**Assessment:** PASS

**Evidence:**
- TierBadge component displays **state**, not model capabilities.
- Tier progression is based on user actions (promotion) and usage signals (retrievals), not model identity.
- Existing schema already model-agnostic: `SproutProvenance` captures lens/hub context without model coupling.
- Works identically whether content was generated by Gemini, Claude, or local 7B models.

**Notes:**
- The design correctly avoids any model-specific display (no "Generated by GPT-4" badges).
- Tier is about knowledge maturity, not generation capability.

---

### 3. Provenance as Infrastructure

**Question:** Is origin/authorship tracked for all data?

**Assessment:** PASS

**Evidence:**
- Existing `SproutProvenance` structure already tracks creation context (lens, hub, journey, node, sources).
- Tier progression **adds temporal provenance**: when was this promoted? by whom?
- Designer's tier history timeline shows complete lifecycle: Seed → Sprout → Sapling with timestamps and actors.

**Recommendations (incorporated into brief):**
1. **Add `promotedAt: string` timestamp** to sprout schema when stage becomes `established`. This closes the provenance loop.
2. Tier history should show "Promoted by you" vs future "Auto-advanced by system" for clarity.

**Notes:**
- The provenance panel enhancement is excellent - it surfaces tier context without cluttering the interface.
- Collapsed history pattern respects information hierarchy (current state > history).

---

### 4. Organic Scalability

**Question:** Does structure support growth without redesign?

**Assessment:** PASS

**Evidence:**
- 5-tier system (seed → sprout → sapling → tree → grove) scales to future phases:
  - Phase 1: Tier filtering
  - Phase 2: Observable signals (retrieval count, utility score)
  - Phase 3: Auto-advancement
  - Phase 4: Custom lifecycle models
  - Phase 5: Cross-grove federation
  - Phase 6: AI curation agents
  - Phase 7: Community grove designation

- Component API explicitly designed for extension:
  ```typescript
  // Phase 0: minimal props
  tier: SproutTier;
  status: SproutStatus;

  // Future: optional extension points
  metrics?: TierMetrics;
  nextTierCriteria?: NextTierCriteria;
  customLifecycle?: LifecycleModel;
  proposedTier?: { tier, agentId, reasoning };
  ```

**Notes:**
- The designer has anticipated 7 phases of growth without requiring component redesign.
- Emoji-first approach allows easy swap to custom SVG in Living Glass migration.
- Quantum Glass → Living Glass migration path is documented, not blocking.

---

## Substrate Potential

**Question:** How does this enable future agentic work?

**Assessment:** EXCELLENT

**Evidence:**
1. **Agent-readable tier state**: Sprout tier can be queried by curation agents to identify candidates for promotion.
2. **Observable signals foundation**: Tier system creates the substrate for Phase 2's utility metrics (retrieval count, query diversity).
3. **Federation readiness**: Tier mapping enables cross-grove knowledge sharing in Phase 5.
4. **AI curation hooks**: Phase 6's agent-proposed advancements require this tier infrastructure.

**Notes:**
- This sprint creates "fertile soil" for future agentic features.
- The efficiency-enlightenment loop is preserved: agents can observe tier progression and learn user curation patterns.

---

## Answers to Open Questions

### 1. Timestamp Addition (`promotedAt`)

**Decision:** YES - Add `promotedAt: string` to sprout schema.

**Rationale:**
- Supports provenance pillar (when was this promoted?)
- Enables tier history timeline in provenance panel
- No schema migration required (optional field)
- Future utility: "promoted 30 days ago" for retention insights

**Implementation:**
```typescript
// In handlePromote after successful RAG write:
updateSprout(sprout.id, {
  stage: 'established',
  promotedAt: new Date().toISOString()  // ← ADD THIS
});
```

### 2. Error State UX

**Decision:** Show error, allow retry. Never leave user in ambiguous state.

**Rationale:**
- If RAG write succeeds but stage update fails, user has partial completion.
- Better to surface the error: "Content added to knowledge base, but tier update failed. Retry?"
- Preserves user trust and data integrity.

**Implementation:**
```typescript
const handlePromote = async (...) => {
  try {
    await fetch('/api/knowledge/upload', {...});
    try {
      updateSprout(sprout.id, { stage: 'established', promotedAt: new Date().toISOString() });
    } catch (stageError) {
      toast.error('Content saved, but tier update failed. Please try again.');
      // Log for debugging, but content is safe
    }
  } catch (ragError) {
    toast.error('Failed to promote content');
  }
};
```

### 3. Backward Compatibility

**Decision:** Confirmed. Existing sprouts without explicit stage map to `hardened`.

**Rationale:**
- `hardened` = "Research complete, ready for review" (matches existing completed sprouts)
- Migration is read-time, not write-time (no database migration needed)
- New captures will have explicit stage from creation

**Implementation:**
```typescript
// In sprout display/retrieval:
const displayTier = sprout.stage
  ? stageTierMap[sprout.stage]  // Use explicit stage
  : 'sprout';                    // Default for legacy sprouts
```

---

## Advisory Council Alignment

### Park (Technical Feasibility)
**Status:** No concerns. Phase 0 is frontend-only with existing schema support.

### Adams (Engagement)
**Status:** Aligned. Subtle 300ms animation respects professional context while providing satisfying feedback. Before/after preview creates "meaningful choice with consequence" pattern.

### Short (Narrative)
**Status:** Tier tooltips provide progressive education - users learn by doing, not onboarding overlays.

---

## Known Tensions: None

The design team has proactively resolved potential tensions:
- **Ship fast vs. ship right**: 5-week timeline is realistic for quality delivery.
- **Simplicity vs. extensibility**: Component API is minimal for Phase 0 but extensible for future.
- **User education vs. workflow interruption**: Tooltips over overlays, first-promotion dialog with "don't show again".

---

## Final Checklist

- [x] **Declarative Sovereignty:** User controls tier advancement
- [x] **Capability Agnosticism:** Model-independent display
- [x] **Provenance as Infrastructure:** Full lifecycle tracking
- [x] **Organic Scalability:** 5-tier system scales to 7+ phases
- [x] **Substrate Potential:** Enables future agentic features
- [x] **Accessibility:** ARIA labels, reduced motion, color independence
- [x] **Design System Alignment:** Quantum Glass tokens (not Living Glass)

---

## Sign-Off

**I, the User Experience Chief, formally approve S4-SL-TierProgression for implementation.**

This sprint:
- Advances Grove's mission of exploration architecture
- Respects user sovereignty at every decision point
- Creates substrate for future agentic evolution
- Maintains architectural consistency with existing patterns

**Recommended Next Steps:**
1. Run `/user-story-refinery` to extract implementation stories with Gherkin acceptance criteria
2. Run `/grove-foundation-loop` to create execution artifacts
3. Update Notion status to `ready`
4. Dispatch to Developer for sprint execution

---

*DEX Compliance Review prepared by User Experience Chief*
*"The lifecycle is now visible. The loop can finally close."*
